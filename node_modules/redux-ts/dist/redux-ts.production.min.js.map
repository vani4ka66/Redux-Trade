{"version":3,"sources":["webpack://ReduxTs/webpack/universalModuleDefinition","webpack://ReduxTs/webpack/bootstrap","webpack://ReduxTs/./src/index.ts","webpack://ReduxTs/./src/polyfills/promise.polyfill.ts","webpack://ReduxTs/./src/reducer.builder.ts","webpack://ReduxTs/./src/store.builder.ts","webpack://ReduxTs/external \"react-redux\"","webpack://ReduxTs/external \"redux\"","webpack://ReduxTs/./src/helpers/redux.helpers.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Promise","deferred","promise","resolve","reject","actions","init","state","initState","handle","creator","body","type","build","dispatchPromise","action","actionBody","nestedAction","then","dispatch","ReducerBuilder","composeEnhancers","compose","middlewares","reducers","reducerBuilders","initialState","enhancers","withMiddleware","push","middleware","withInitialState","withReducer","reducer","withReducerBuilder","reducerBuilder","withReducersMap","withReducerBuildersMap","withEnhancer","withDevTools","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","defer","reducerMap","keys","reduce","applyMiddleware","combineReducers","enhancer","store","createStore","connected","mapStateToProps","mapDispatchToProps","connect","mapStoreToProps","map","StoreBuilder","require","createAction","payload","meta","own","mapper","prev","params"],"mappings":"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","file":"redux-ts.production.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ReduxTs\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReduxTs\"] = factory();\n\telse\n\t\troot[\"ReduxTs\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import './polyfills/promise.polyfill'\n\nexport * from './models/action.model'\nexport * from './models/redux.model'\nexport * from './reducer.builder'\nexport * from './store.builder'\nexport * from './helpers/redux.helpers'\n","interface PromiseConstructor {\r\n  defer<T>(): {\r\n    resolve: (value?: T | PromiseLike<T>) => void\r\n    reject: (reason?: any) => void\r\n    promise: Promise<T>,\r\n  }\r\n}\r\n\r\nPromise['defer'] = function deferPolyfill() {\r\n  const deferred = {} as any\r\n  const promise = new Promise((resolve, reject) => {\r\n    deferred.resolve = resolve\r\n    deferred.reject = reject\r\n  })\r\n  deferred.promise = promise\r\n  return deferred\r\n}\r\n","import { Dispatch, Reducer } from 'redux'\r\n\r\nimport { Action, ActionBody, ActionCreatorDefinition, LazyDispatch } from './'\r\n\r\nexport class ReducerBuilder<State = {}> {\r\n  private actions: { [type: string]: ActionBody<State, Action> } = {}\r\n  private initState: State\r\n\r\n  /**\r\n   * Initial state of the reducer\r\n   *\r\n   * @param {State} state State object\r\n   * @returns\r\n   * @memberof ReducerBuilder\r\n   */\r\n  public init(state: State) {\r\n    this.initState = state\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Consumer definition for given action type\r\n   *\r\n   * @template TPayload Action payload type\r\n   * @param {ActionCreatorDefinition<TPayload>} creator Action creator function\r\n   * @param {ActionBody<State, Action<TPayload>>} body Action body\r\n   * @returns\r\n   * @memberof ReducerBuilder\r\n   */\r\n  public handle<TPayload, TMeta>(\r\n    creator: ActionCreatorDefinition<TPayload, TMeta>,\r\n    body: ActionBody<State, Action<TPayload, TMeta>>,\r\n  ) {\r\n    this.actions[creator.type] = body\r\n    return this\r\n  }\r\n\r\n  private build(dispatchPromise: Promise<Dispatch>): Reducer<State, Action> {\r\n    return (state = this.initState, action) => {\r\n      const actionBody = this.actions[action.type]\r\n      const lazyDispatch: LazyDispatch = nestedAction =>\r\n        dispatchPromise.then(dispatch => dispatch(nestedAction))\r\n\r\n      if (!!actionBody) {\r\n        return actionBody(state, action, lazyDispatch)\r\n      }\r\n\r\n      return state\r\n    }\r\n  }\r\n}\r\n","import { connect } from 'react-redux'\r\nimport {\r\n  applyMiddleware, combineReducers, compose, createStore, DeepPartial, Dispatch, Middleware,\r\n  Reducer, ReducersMapObject, StoreEnhancer\r\n} from 'redux'\r\n\r\nimport { Action, ReducerBuilder, Store } from './'\r\n\r\ninterface StoreState {\r\n  [key: string]: any\r\n}\r\ntype ReducerBuilderMap<S> = { [key in keyof S]: ReducerBuilder }\r\n\r\nexport class StoreBuilder<S extends StoreState> {\r\n  private middlewares: Middleware[]\r\n  private reducers: ReducersMapObject<S>\r\n  private reducerBuilders: ReducerBuilderMap<S>\r\n  private initialState: DeepPartial<S>\r\n  private enhancers: StoreEnhancer[]\r\n  private composeEnhancers = compose\r\n\r\n  constructor() {\r\n    this.middlewares = []\r\n    this.reducers = {} as ReducersMapObject<S>\r\n    this.reducerBuilders = {} as ReducerBuilderMap<S>\r\n    this.initialState = {}\r\n    this.enhancers = []\r\n  }\r\n\r\n  /**\r\n   * Register given middlewares.\r\n   *\r\n   * _Execution order will be same as registration order._\r\n   *\r\n   * @param {Middleware} middleware\r\n   * @returns\r\n   * @memberof StoreBuilder\r\n   */\r\n  public withMiddleware(...middleware: Middleware[]) {\r\n    this.middlewares.push(...middleware)\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Initial value of store state\r\n   *\r\n   * @param {DeepPartial<StoreType>} state\r\n   * @returns\r\n   * @memberof StoreBuilder\r\n   */\r\n  public withInitialState(state: DeepPartial<S>) {\r\n    this.initialState = state\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Register pure redux reducer with given name\r\n   *\r\n   * @param {string} name Name of the reducer. _(should be same as store field name)_\r\n   * @param {Reducer} reducer Reducer instance\r\n   * @returns\r\n   * @memberof StoreBuilder\r\n   */\r\n  public withReducer(name: keyof S, reducer: Reducer) {\r\n    this.reducers[name] = reducer\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Register *ReducerBuilder* instance\r\n   *\r\n   * @param {string} name Name of the reducer. _(should be same as store field name)_\r\n   * @param {ReducerBuilder} reducerBuilder ReducerBuilder instance\r\n   * @returns\r\n   * @memberof StoreBuilder\r\n   */\r\n  public withReducerBuilder(name: keyof S, reducerBuilder: ReducerBuilder) {\r\n    this.reducerBuilders[name] = reducerBuilder\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Register list of pure reducer functions with given name\r\n   *\r\n   * @param {ReducersMapObject} reducers List of reducers\r\n   * @returns\r\n   * @memberof StoreBuilder\r\n   */\r\n  public withReducersMap(reducers: ReducersMapObject) {\r\n    this.reducers = {\r\n      ...(this.reducers as any),\r\n      ...reducers,\r\n    }\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Register list of ReducerBuilder objects with given name\r\n   *\r\n   * @param {ReducerBuilderMap} reducerBuilders List of ReducerBuilder objects\r\n   * @returns\r\n   * @memberof StoreBuilder\r\n   */\r\n  public withReducerBuildersMap(reducerBuilders: ReducerBuilderMap<S>) {\r\n    this.reducerBuilders = {\r\n      ...this.reducerBuilders,\r\n      ...reducerBuilders,\r\n    }\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Register given enhancer\r\n   *\r\n   * _Execution order will be same as registration order._\r\n   *\r\n   * @param {StoreEnhancer} enhancer\r\n   * @returns\r\n   * @memberof StoreBuilder\r\n   */\r\n  public withEnhancer(...enhancers: StoreEnhancer[]) {\r\n    this.enhancers.push(...enhancers)\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Enable chrome devtools\r\n   *\r\n   * @returns\r\n   * @memberof StoreBuilder\r\n   */\r\n  public withDevTools() {\r\n    this.composeEnhancers =\r\n      (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ||\r\n      this.composeEnhancers\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * Build an instance of store with configured values.\r\n   *\r\n   * @returns {Store<StoreType>}\r\n   * @memberof StoreBuilder\r\n   */\r\n  public build(): Store<S> {\r\n    const defer = Promise.defer<Dispatch<Action>>()\r\n    const reducerMap = Object.keys(this.reducerBuilders).reduce(\r\n      (p: any, r) => ({\r\n        ...p,\r\n        [r]: (this.reducerBuilders[r] as any).build(defer.promise),\r\n      }),\r\n      this.reducers,\r\n    )\r\n    const middlewares = applyMiddleware(...this.middlewares)\r\n    const reducer = combineReducers<S>(reducerMap)\r\n    const enhancer = this.composeEnhancers(middlewares, ...this.enhancers)\r\n    const store = createStore(reducer, this.initialState, enhancer)\r\n\r\n    defer.resolve(store.dispatch)\r\n\r\n    return {\r\n      ...store,\r\n      connected: (mapStateToProps, mapDispatchToProps) =>\r\n        mapDispatchToProps\r\n          ? (connect(mapStateToProps, mapDispatchToProps) as any)\r\n          : (connect(mapStateToProps) as any),\r\n      mapStoreToProps: map => map,\r\n    }\r\n  }\r\n}\r\n","module.exports = require(\"react-redux\");","module.exports = require(\"redux\");","import { ActionCreatorDefinition, DispatchToProps, Indexer } from '../'\r\n\r\nexport const createAction = <TPayload = any, TMeta = any>(\r\n  type: string,\r\n): ActionCreatorDefinition<TPayload, TMeta> => {\r\n  const creator: any = (payload?: TPayload, meta?: TMeta) => ({\r\n    payload,\r\n    meta,\r\n    type,\r\n  })\r\n  creator.type = type\r\n  return creator\r\n}\r\n\r\n\r\n/**\r\n* Dummy function to return `MapDispatchToPropsParam` type that can be passed to `connect`\r\n* As paramter, either mapper function which takes dispatch object and returns indexer object or indexer object is required\r\n* ex. \r\n* const changeLayout = createAction('changeLayout')\r\n* const dispatchedProps = mapDispatchToProps((dispatch, own) => ({ changeLayout: () => dispatch(changeLayout()) }))\r\n* // or\r\n* const dispatchedProps = mapDispatchToProps({ changeLayout }))\r\n* \r\n* @param {*} map\r\n*/\r\nexport const mapDispatchToProps: DispatchToProps = map => (dispatch, own) => {\r\n  const mapper = <T extends Indexer>(m: T) =>\r\n    Object.keys(m).reduce(\r\n      (prev, key) => ({\r\n        ...prev,\r\n        [key]: (...params: any[]) => dispatch(m[key](...params)),\r\n      }),\r\n      {},\r\n    ) as typeof m\r\n\r\n  return typeof map === 'function' ? mapper(map(dispatch, own)) : mapper(map)\r\n}"],"sourceRoot":""}